<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEFE - European Energy Trading Dashboard</title>
    <!-- Google Font: Urbanist -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* --- Global Styles & Variables --- */
        :root {
            --sefe-blue: #075a87;
            --sefe-green: #56913c;
            --sefe-light-green: #c2d690;
            --light-gray-border: #ebecec;
            --text-color: #333;
            --background-color: #ffffff;
            --header-height: 70px;
            --footer-height: 50px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
            font-family: 'Urbanist', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        /* --- Layout --- */
        .dashboard-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .dashboard-header {
            display: flex;
            align-items: center;
            padding: 10px 25px;
            height: var(--header-height);
            background-color: var(--background-color);
            border-bottom: 2px solid var(--light-gray-border);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .sefe-logo {
            max-height: 80%;
            width: auto;
            margin-right: 20px;
        }

        .dashboard-title {
            color: var(--sefe-blue);
            font-size: 1.8em;
            font-weight: 700;
        }

        .dashboard-main {
            flex-grow: 1;
            padding: 25px;
            background-color: #f9f9f9;
            /* padding-bottom accounts for footer height */
            padding-bottom: calc(var(--footer-height) + 25px);
        }

        /* --- Section Styling --- */
        .dashboard-section {
            background-color: var(--background-color);
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid var(--light-gray-border);
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .section-title {
            color: var(--sefe-blue);
            font-size: 1.5em;
            font-weight: 700;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--light-gray-border);
        }

        /* --- Data Cards / Grids --- */
        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .country-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .key-stats-grid {
             display: grid;
             grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
             gap: 15px;
             margin-bottom: 20px;
        }

        .data-card, .country-card, .key-stat-card {
            border: 1px solid var(--light-gray-border);
            border-radius: 5px;
            padding: 15px;
            background-color: #fff;
            text-align: center;
            position: relative; /* For potential indicators */
        }

        .data-card h4, .country-card h4, .key-stat-card h4 {
            font-size: 0.9em;
            color: #555;
            margin-bottom: 8px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .data-card .value, .country-card .value, .key-stat-card .value {
            font-size: 1.4em;
            font-weight: 700;
            color: var(--sefe-green);
            transition: color 0.3s ease, background-color 0.3s ease; /* For simulated updates */
        }
        .country-card .value {
             color: var(--sefe-blue);
         }
         .key-stat-card .value {
            color: var(--sefe-blue);
            font-size: 1.6em; /* Make key stats slightly larger */
         }

         /* Simulated update flash */
         .value-updating {
             background-color: rgba(194, 214, 144, 0.3); /* Light SEFE green flash */
             transition: background-color 0.1s ease;
         }


        .country-card h3 {
            color: var(--sefe-blue);
            margin-bottom: 15px;
            text-align: left;
            font-size: 1.2em;
        }
        .country-data-grid {
             display: grid;
             grid-template-columns: 1fr 1fr;
             gap: 10px;
             margin-bottom: 15px;
         }

        /* --- Charts --- */
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
            margin-top: 15px; /* Reduced top margin */
            border: 1px solid var(--light-gray-border);
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px; /* Add space before summary note */
        }
        .country-chart-container {
             position: relative;
             height: 180px;
             width: 100%;
             margin-top: 15px;
             margin-bottom: 10px; /* Add space before summary note */
        }

        /* --- Tables --- */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
             margin-bottom: 10px; /* Add space before summary note */
        }
        /* ... (rest of table styles remain same) ... */
        .data-table th, .data-table td {
            border: 1px solid var(--light-gray-border);
            padding: 10px 12px;
            text-align: left;
            vertical-align: middle;
            font-size: 0.95em;
        }

        .data-table thead th {
            background-color: var(--sefe-blue);
            color: white;
            font-weight: 500;
            position: sticky;
            top: var(--header-height);
            z-index: 10;
        }

        .data-table tbody tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .data-table tbody tr:hover {
            background-color: var(--sefe-light-green);
            cursor: pointer;
        }

        /* --- Summary Notes --- */
        .summary-note {
            font-size: 0.85em;
            font-style: italic;
            color: #555;
            margin-top: 10px; /* Space after chart/table */
            padding: 8px;
            background-color: #f8f9fa;
            border-left: 3px solid var(--sefe-light-green);
            border-radius: 0 4px 4px 0;
        }

        /* --- Market Trends List --- */
        .trends-list {
            list-style: none;
            padding-left: 0;
            margin-bottom: 10px; /* Add space before summary note */
        }
        .trends-list li {
            padding: 8px 0;
            border-bottom: 1px dashed var(--light-gray-border);
        }
        .trends-list li:last-child { border-bottom: none; }
        .trends-list strong { color: var(--sefe-green); }

        /* --- AI Suggestions --- */
        .ai-suggestions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        .suggestion-card {
            border: 1px solid var(--light-gray-border);
            border-left: 4px solid var(--sefe-green);
            border-radius: 5px;
            padding: 15px;
            background-color: #fdfdfd;
        }
        .suggestion-card h4 {
            color: var(--sefe-blue);
            margin-bottom: 8px;
            font-size: 1.1em;
        }
         .suggestion-card p {
             font-size: 0.95em;
             color: #444;
         }
        .ai-timestamp {
            font-size: 0.8em;
            color: #777;
            text-align: right;
            margin-top: -15px; /* Position near title */
            margin-bottom: 15px;
        }

        /* --- Footer --- */
        .dashboard-footer {
            height: var(--footer-height);
            padding: 15px 25px;
            background-color: var(--sefe-blue);
            color: #e0e0e0;
            text-align: center;
            font-size: 0.85em;
            border-top: 1px solid var(--light-gray-border);
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
        }
        .dashboard-footer p { margin: 0; }
        #last-updated-time { font-weight: 500; color: #fff; }

        /* --- Sources --- */
        .sources-list {
            list-style: disc;
            padding-left: 20px;
            font-size: 0.9em;
            columns: 2; /* Basic multi-column layout */
           -webkit-columns: 2;
           -moz-columns: 2;
            gap: 20px;
        }
        .sources-list li { margin-bottom: 5px; }
        .sources-list a {
            color: var(--sefe-green);
            text-decoration: none;
        }
         .sources-list a:hover { text-decoration: underline; }

        /* --- Responsive Adjustments --- */
        @media (max-width: 768px) {
            .dashboard-title { font-size: 1.4em; }
            .data-grid { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
            .country-grid { grid-template-columns: 1fr; }
            .key-stats-grid { grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); }
            .section-title { font-size: 1.3em; }
            .data-card .value, .country-card .value, .key-stat-card .value { font-size: 1.2em; }
             .key-stat-card .value { font-size: 1.4em; }
            .data-table th, .data-table td { padding: 8px; font-size: 0.9em; }
            .ai-suggestions-grid { grid-template-columns: 1fr; }
             .sources-list { columns: 1; -webkit-columns: 1; -moz-columns: 1; }
             .dashboard-footer { font-size: 0.8em; padding: 10px 15px; }
        }
         @media (max-width: 480px) {
             .dashboard-header { padding: 5px 15px; height: 60px; }
             .dashboard-title { font-size: 1.1em; }
             .sefe-logo { max-height: 70%; margin-right: 10px; }
             .dashboard-main { padding: 15px; padding-bottom: calc(var(--footer-height) + 15px); }
             .data-grid, .key-stats-grid { grid-template-columns: 1fr 1fr; }
             .data-card h4, .key-stat-card h4 { font-size: 0.8em; }
             .data-card .value, .key-stat-card .value { font-size: 1.1em; }
             .key-stat-card .value { font-size: 1.2em; }
             .country-data-grid { grid-template-columns: 1fr; } /* Stack country sub-cards */
             .chart-container { height: 250px; }
             .country-chart-container { height: 150px; }
         }

    </style>
</head>
<body>
    <div class="dashboard-container">
        <header class="dashboard-header">
            <img src="https://cdn01.sefe-energy.com/media/a22bjozn/sefe_logo_rgb-website.png?width=1920&height=1080&rnd=133432403393430000&quality=55" alt="SEFE Logo" class="sefe-logo">
            <h1 class="dashboard-title">European Energy Trading Dashboard</h1>
        </header>

        <main class="dashboard-main">

             <!-- Key Market Statistics (Simulated) -->
            <section class="dashboard-section" id="key-market-stats">
                <h2 class="section-title">Key Market Statistics (Simulated Real-Time)</h2>
                <div class="key-stats-grid">
                    <div class="key-stat-card">
                        <h4>TTF Gas Price (â‚¬/MWh)</h4>
                        <p class="value" id="live-ttf-price">28.75</p>
                    </div>
                    <div class="key-stat-card">
                        <h4>Traded Volume (GWh/Day)</h4>
                        <p class="value" id="live-volume">1,250</p>
                    </div>
                    <div class="key-stat-card">
                        <h4>Market Volatility (TTF % 1D)</h4>
                        <p class="value" id="live-volatility">1.85%</p>
                    </div>
                    <div class="key-stat-card">
                        <h4>Market Sentiment</h4>
                        <p class="value" id="live-sentiment">Neutral</p> <!-- Example: Neutral, Bullish, Bearish -->
                    </div>
                </div>
                 <p class="summary-note">
                    Core indicators showing current TTF gas price, daily traded volume, short-term price volatility, and overall market sentiment (simulated). Updates mimic live ticker behavior.
                </p>
            </section>

            <!-- 1. European Macro Overview -->
            <section class="dashboard-section" id="europe-macro">
                <h2 class="section-title">European Macro & Fundamentals</h2>
                <div class="data-grid">
                     <div class="data-card">
                        <h4>EU GDP Growth (QoQ)</h4>
                        <p class="value" id="eu-gdp">0.3%</p>
                    </div>
                    <div class="data-card">
                        <h4>Eurozone Inflation (YoY)</h4>
                        <p class="value" id="eu-inflation">2.4%</p>
                    </div>
                    <div class="data-card">
                        <h4>ECB Interest Rate</h4>
                        <p class="value" id="eu-interest-rate">4.50%</p>
                    </div>
                     <div class="data-card">
                        <h4>Gas Storage (EU Avg %)</h4>
                        <p class="value" id="eu-storage">65.2%</p> <!-- Example: From AGSI+ -->
                    </div>
                    <div class="data-card">
                        <h4>Carbon Price (EUA â‚¬/t)</h4>
                        <p class="value" id="eu-carbon">â‚¬65.50</p>
                    </div>
                     <div class="data-card">
                        <h4>Brent Crude ($/bbl)</h4>
                        <p class="value" id="brent-price">$82.10</p>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="europeGasChart"></canvas>
                </div>
                <p class="summary-note">
                    Chart shows simulated historical TTF gas price trends. Higher prices often correlate with lower storage, geopolitical events, or high demand periods. Recent trend shows stabilization after winter peaks. Macro indicators provide context for demand outlook.
                </p>
            </section>

            <!-- 2. Key Country Focus -->
            <section class="dashboard-section" id="key-countries">
                <h2 class="section-title">Key Country Focus</h2>
                <div class="country-grid">
                    <!-- United Kingdom -->
                    <article class="country-card" id="country-uk">
                        <h3>ðŸ‡¬ðŸ‡§ United Kingdom</h3>
                         <div class="country-data-grid">
                             <div class="data-card"><h4>GDP Growth</h4><p class="value">0.1%</p></div>
                             <div class="data-card"><h4>Inflation</h4><p class="value">3.2%</p></div>
                             <div class="data-card"><h4>NBP Gas (â‚¬/MWh)</h4><p class="value">â‚¬28.10</p></div>
                             <div class="data-card"><h4>Power Price (Â£/MWh)</h4><p class="value" id="live-uk-power">75.50</p></div>
                         </div>
                        <div class="country-chart-container">
                            <canvas id="ukPowerChart"></canvas>
                        </div>
                        <p class="summary-note">UK power prices influenced by NBP gas, wind generation levels, and interconnection flows. Chart shows simulated recent price movements.</p>
                    </article>

                    <!-- France -->
                    <article class="country-card" id="country-fr">
                         <h3>ðŸ‡«ðŸ‡· France</h3>
                         <div class="country-data-grid">
                            <div class="data-card"><h4>GDP Growth</h4><p class="value">0.2%</p></div>
                            <div class="data-card"><h4>Inflation</h4><p class="value">2.2%</p></div>
                            <div class="data-card"><h4>PEG Gas (â‚¬/MWh)</h4><p class="value">â‚¬28.50</p></div>
                            <div class="data-card"><h4>Power Price (â‚¬/MWh)</h4><p class="value" id="live-fr-power">45.80</p></div>
                        </div>
                        <div class="country-chart-container">
                             <canvas id="frPowerChart"></canvas>
                         </div>
                         <p class="summary-note">French power heavily impacted by nuclear availability and hydro levels. Lower prices typically seen during high nuclear output. Chart simulates recent trends.</p>
                    </article>

                    <!-- Germany -->
                    <article class="country-card" id="country-de">
                         <h3>ðŸ‡©ðŸ‡ª Germany</h3>
                         <div class="country-data-grid">
                             <div class="data-card"><h4>GDP Growth</h4><p class="value">-0.2%</p></div>
                             <div class="data-card"><h4>Inflation</h4><p class="value">2.3%</p></div>
                             <div class="data-card"><h4>THE Gas (â‚¬/MWh)</h4><p class="value">â‚¬28.90</p></div>
                             <div class="data-card"><h4>Power Price (â‚¬/MWh)</h4><p class="value" id="live-de-power">60.20</p></div>
                         </div>
                         <div class="country-chart-container">
                            <canvas id="dePowerChart"></canvas>
                        </div>
                         <p class="summary-note">German power sensitive to renewable infeed (wind/solar) and lignite generation costs. Negative prices possible during high renewable/low demand periods. Chart simulates recent trends.</p>
                    </article>

                    <!-- Italy -->
                    <article class="country-card" id="country-it">
                         <h3>ðŸ‡®ðŸ‡¹ Italy</h3>
                          <div class="country-data-grid">
                             <div class="data-card"><h4>GDP Growth</h4><p class="value">0.3%</p></div>
                             <div class="data-card"><h4>Inflation</h4><p class="value">1.0%</p></div>
                             <div class="data-card"><h4>PSV Gas (â‚¬/MWh)</h4><p class="value">â‚¬29.50</p></div>
                             <div class="data-card"><h4>Power Price (â‚¬/MWh)</h4><p class="value" id="live-it-power">90.10</p></div>
                          </div>
                        <div class="country-chart-container">
                             <canvas id="itPowerChart"></canvas>
                         </div>
                          <p class="summary-note">Italian power prices often among the highest due to reliance on gas generation and import needs. PSV gas price is a key driver. Chart simulates recent trends.</p>
                    </article>
                </div>
            </section>

             <!-- AI Suggested Trading Actions -->
            <section class="dashboard-section" id="ai-suggestions">
                <h2 class="section-title">AI Suggested Trading Actions (Simulated)</h2>
                 <p class="ai-timestamp">Based on data at: <span id="ai-timestamp"></span></p>
                <div class="ai-suggestions-grid">
                    <div class="suggestion-card">
                        <h4>TTF Gas</h4>
                        <p>Consider Short M+1 vs M+2: Slight contango observed, potential softening demand outlook based on weather forecasts. Monitor storage injection rates closely.</p>
                    </div>
                    <div class="suggestion-card">
                        <h4>Spreads</h4>
                         <p>DE-FR Power Spread: Potential widening opportunity if French nuclear outlook improves faster than German wind forecast. Monitor availability reports.</p>
                    </div>
                    <div class="suggestion-card">
                        <h4>Risk</h4>
                        <p>Geopolitical Alert: Increased monitoring recommended for flows via Ukraine/Turkey routes due to recent reports. Consider reducing exposure on far-curve contracts.</p>
                    </div>
                    <div class="suggestion-card">
                        <h4>General</h4>
                        <p>Carbon Market (EUA): Price holding support level. Upside potential if industrial activity picks up or regulatory news firms prices. Hold existing length.</p>
                    </div>
                </div>
                 <p class="summary-note">
                    These are *example* trading ideas generated by a hypothetical AI analyzing market data. They are for demonstration only and do not constitute financial advice. Real AI suggestions would depend on complex models and real-time inputs.
                </p>
            </section>

            <!-- 3. Company Research -->
            <section class="dashboard-section" id="company-research">
                <h2 class="section-title">Company Research (Sample Data)</h2>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Company</th>
                            <th>Ticker</th>
                            <th>Sector</th>
                            <th>Market Cap</th>
                            <th>P/E Ratio</th>
                            <th>Recent News Snippet</th>
                        </tr>
                    </thead>
                     <tbody>
                        <tr>
                            <td>RWE AG</td>
                            <td>RWE.DE</td>
                            <td>Utility / Renewables</td>
                            <td>â‚¬25.5B</td>
                            <td>8.5</td>
                            <td>Announced new offshore wind project investment...</td>
                        </tr>
                        <tr>
                            <td>Engie SA</td>
                            <td>ENGI.PA</td>
                            <td>Utility / Energy Services</td>
                            <td>â‚¬34.2B</td>
                            <td>7.2</td>
                            <td>Reported stable Q1 earnings, focus on energy transition...</td>
                        </tr>
                        <tr>
                            <td>Enel SpA</td>
                            <td>ENEL.MI</td>
                            <td>Utility / Renewables</td>
                            <td>â‚¬68.0B</td>
                            <td>11.3</td>
                            <td>Expanding grid modernization efforts in South America...</td>
                        </tr>
                        <tr>
                            <td>SSE plc</td>
                            <td>SSE.L</td>
                            <td>Utility / Networks</td>
                            <td>Â£19.8B</td>
                            <td>9.1</td>
                            <td>Updates guidance on renewables output for FY...</td>
                        </tr>
                         <tr>
                            <td>Ã˜rsted A/S</td>
                             <td>ORSTED.CO</td>
                             <td>Renewables</td>
                             <td>DKK 170B</td>
                             <td>15.5</td>
                             <td>Final investment decision reached on major US offshore wind farm...</td>
                        </tr>
                        <!-- Add more sample company rows as needed -->
                    </tbody>
                </table>
                 <p class="summary-note">
                    Overview of key European energy players with simulated fundamental data. P/E ratios indicate relative valuation. News snippets highlight recent strategic moves or performance indicators relevant to market position.
                </p>
            </section>

            <!-- 4. Market Trends & News -->
            <section class="dashboard-section" id="market-trends">
                <h2 class="section-title">Market Trends & News Highlights</h2>
                <ul class="trends-list">
                    <li><strong>Geopolitical Tensions:</strong> Ongoing monitoring of supply risks from Eastern Europe and Middle East impacting gas prices.</li>
                    <li><strong>Renewable Curtailment:</strong> Increased instances of negative power pricing in DE/NL during high wind/solar periods.</li>
                    <li><strong>Regulatory Updates:</strong> EU finalizing details on CfDs for hydrogen projects - potential impact on long-term gas demand.</li>
                    <li><strong>Storage Levels:</strong> European gas storage remains comfortably high (currently ~<span id="trend-storage-level">65</span>%), providing a buffer against short-term volatility.</li>
                    <li><strong>Weather Forecasts:</strong> Mild spring temperatures across most of Europe reducing heating demand, but impacting hydro levels in some regions.</li>
                </ul>
                 <p class="summary-note">
                    Summary of current key factors influencing European energy markets. These trends shape short-term price action and long-term strategic positioning.
                </p>
            </section>

             <!-- 5. Data Sources -->
            <section class="dashboard-section" id="data-sources">
                <h2 class="section-title">Data Source References (Examples)</h2>
                <p><i>Note: Direct data fetching from many of these sources requires backend integration, APIs, and subscriptions.</i></p>
                <ul class="sources-list">
                     <li><a href="https://transparency.entsoe.eu" target="_blank" rel="noopener noreferrer">ENTSO-E Transparency Platform</a> (Electricity fundamentals)</li>
                     <li><a href="https://www.theice.com" target="_blank" rel="noopener noreferrer">ICE (Intercontinental Exchange)</a> (Futures/Spot prices)</li>
                     <li><a href="https://www.eex.com" target="_blank" rel="noopener noreferrer">EEX (European Energy Exchange)</a> (Power, Gas, Emissions)</li>
                     <li><a href="https://www.nordpoolgroup.com" target="_blank" rel="noopener noreferrer">Nord Pool</a> (Nordic/Baltic/CE Power)</li>
                     <li><a href="https://tradingeconomics.com" target="_blank" rel="noopener noreferrer">Trading Economics</a> (TTF Gas, Macro)</li>
                     <li><a href="https://energy.ec.europa.eu/data-and-analysis/market-analysis_en" target="_blank" rel="noopener noreferrer">EU Energy Market Observatory</a> (EU Prices, Reports)</li>
                     <li><a href="https://meteomatics.com" target="_blank" rel="noopener noreferrer">Meteomatics</a> (Weather Data API)</li>
                     <li><a href="https://open-meteo.com" target="_blank" rel="noopener noreferrer">Open-Meteo</a> (Weather Data API)</li>
                     <li><a href="https://cds.climate.copernicus.eu" target="_blank" unselectable="on">Copernicus Climate Data Store</a> (Climate/Weather Data)</li>
                     <li><a href="https://api.windy.com" target="_blank" rel="noopener noreferrer">Windy.com API</a> (Weather Visualization API)</li>
                     <li><a href="https://agsi.gie.eu" target="_blank" rel="noopener noreferrer">AGSI+ (Gas Infrastructure Europe)</a> (Gas Storage)</li>
                     <li><a href="https://transparency.entsog.eu" target="_blank" rel="noopener noreferrer">ENTSOG Transparency Platform</a> (Gas Flows)</li>
                     <li><a href="https://www.eea.europa.eu" target="_blank" rel="noopener noreferrer">EEA (European Environment Agency)</a> (Emissions Data)</li>
                     <li><a href="https://carbon-pulse.com" target="_blank" rel="noopener noreferrer">Carbon Pulse</a> (Carbon Market News)</li>
                     <li><a href="https://eur-lex.europa.eu" target="_blank" rel="noopener noreferrer">EUR-Lex</a> (EU Legislation)</li>
                     <li><a href="https://data.nasdaq.com" target="_blank" rel="noopener noreferrer">Nasdaq Data Link (Quandl)</a> (Commodities Data)</li>
                </ul>
            </section>

        </main>

        <footer class="dashboard-footer">
            <p>SEFE Energy Trading Dashboard Demo by Don Spampinato &copy; 2025. Data is simulated for demonstration purposes only. Last updated: <span id="last-updated-time"></span></p>
        </footer>
    </div>

    <script>
        // --- Wait for DOM to Load ---
        document.addEventListener('DOMContentLoaded', () => {

            // --- Chart Options (Remain Mostly Same) ---
            const chartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                 plugins: {
                    legend: { display: true, position: 'top', labels: { font: { family: 'Urbanist', size: 12 } } },
                    tooltip: { mode: 'index', intersect: false, bodyFont: { family: 'Urbanist' }, titleFont: { family: 'Urbanist' } },
                 },
                 scales: {
                     x: { ticks: { font: { family: 'Urbanist' } }, grid: { display: false } },
                     y: { ticks: { font: { family: 'Urbanist' } }, grid: { color: '#e0e0e0', borderDash: [2, 3] } }
                 },
                 elements: { point: { radius: 3, hoverRadius: 5 }, line: { tension: 0.1 } }
            };
             const countryChartOptions = {
                 ...chartOptions,
                 plugins: { ...chartOptions.plugins, legend: { display: false } },
                 scales: {
                     x: { ...chartOptions.scales.x, ticks: { ...chartOptions.scales.x.ticks, maxTicksLimit: 6 } },
                     y: { ...chartOptions.scales.y, ticks: { ...chartOptions.scales.y.ticks, maxTicksLimit: 5 } }
                 },
                  elements: { point: { radius: 2, hoverRadius: 4 }, line: { tension: 0.1 } }
             };

            // --- Sample Data (Remains Static for Charts) ---
            const sampleLabels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const sampleShortLabels = ['W1', 'W2', 'W3', 'W4', 'W5', 'W6', 'W7', 'W8']; // Shorter labels for country charts

            // --- Chart Instantiation (Using Static Data) ---
             // 1. Europe Gas Price Chart
            const europeGasCtx = document.getElementById('europeGasChart')?.getContext('2d');
            if (europeGasCtx) {
                new Chart(europeGasCtx, {
                    type: 'line',
                    data: {
                        labels: sampleLabels.slice(-8), // Show last 8 months for example
                        datasets: [{
                            label: 'TTF Gas Price (â‚¬/MWh)',
                            data: [35, 30, 28, 29, 31, 33, 29, 28.75].map(v => v + Math.random() * 1 - 0.5),
                            borderColor: 'var(--sefe-blue)',
                            backgroundColor: 'rgba(7, 90, 135, 0.1)',
                            borderWidth: 2, fill: true, pointBackgroundColor: 'var(--sefe-blue)'
                        }]
                    },
                    options: { ...chartOptions, plugins: { ...chartOptions.plugins, title: { display: true, text: 'European Gas Price Trend (TTF - Simulated)', font: { family: 'Urbanist', size: 14, weight: 'bold' }, color: 'var(--sefe-blue)'} } }
                });
            }

            // 2. UK Power Price Chart
            const ukPowerCtx = document.getElementById('ukPowerChart')?.getContext('2d');
             if (ukPowerCtx) {
                 new Chart(ukPowerCtx, {
                     type: 'line', data: { labels: sampleShortLabels, datasets: [{ label: 'UK Power (Â£/MWh)', data: [82, 78, 70, 72, 75, 78, 80, 75.5].map(v => v + Math.random() * 2 - 1), borderColor: 'var(--sefe-green)', backgroundColor: 'rgba(86, 145, 60, 0.1)', borderWidth: 1.5, fill: false, pointBackgroundColor: 'var(--sefe-green)' }] }, options: countryChartOptions
                 });
             }
            // 3. France Power Price Chart
             const frPowerCtx = document.getElementById('frPowerChart')?.getContext('2d');
             if (frPowerCtx) {
                 new Chart(frPowerCtx, {
                     type: 'line', data: { labels: sampleShortLabels, datasets: [{ label: 'FR Power (â‚¬/MWh)', data: [50, 45, 40, 42, 45, 48, 52, 45.8].map(v => v + Math.random() * 2 - 1), borderColor: 'var(--sefe-green)', backgroundColor: 'rgba(86, 145, 60, 0.1)', borderWidth: 1.5, fill: false, pointBackgroundColor: 'var(--sefe-green)' }] }, options: countryChartOptions
                 });
             }
             // 4. Germany Power Price Chart
             const dePowerCtx = document.getElementById('dePowerChart')?.getContext('2d');
              if (dePowerCtx) {
                  new Chart(dePowerCtx, {
                      type: 'line', data: { labels: sampleShortLabels, datasets: [{ label: 'DE Power (â‚¬/MWh)', data: [65, 60, 55, 58, 60, 63, 68, 60.2].map(v => v + Math.random() * 2 - 1), borderColor: 'var(--sefe-green)', backgroundColor: 'rgba(86, 145, 60, 0.1)', borderWidth: 1.5, fill: false, pointBackgroundColor: 'var(--sefe-green)' }] }, options: countryChartOptions
                  });
              }
             // 5. Italy Power Price Chart
              const itPowerCtx = document.getElementById('itPowerChart')?.getContext('2d');
              if (itPowerCtx) {
                  new Chart(itPowerCtx, {
                      type: 'line', data: { labels: sampleShortLabels, datasets: [{ label: 'IT Power (â‚¬/MWh)', data: [95, 90, 85, 88, 90, 92, 98, 90.1].map(v => v + Math.random() * 2 - 1), borderColor: 'var(--sefe-green)', backgroundColor: 'rgba(86, 145, 60, 0.1)', borderWidth: 1.5, fill: false, pointBackgroundColor: 'var(--sefe-green)' }] }, options: countryChartOptions
                  });
              }

            // --- Timestamp Function ---
            function getCurrentTimestamp() {
                const now = new Date();
                return now.toLocaleString('en-GB', { dateStyle: 'medium', timeStyle: 'medium' });
                 // Example: 14 May 2024, 15:30:10
            }

            // --- Elements for Live Update Simulation ---
            const liveTtfElement = document.getElementById('live-ttf-price');
            const liveVolumeElement = document.getElementById('live-volume');
            const liveVolatilityElement = document.getElementById('live-volatility');
            const liveSentimentElement = document.getElementById('live-sentiment');
            const liveUkPowerElement = document.getElementById('live-uk-power');
            const liveFrPowerElement = document.getElementById('live-fr-power');
            const liveDePowerElement = document.getElementById('live-de-power');
            const liveItPowerElement = document.getElementById('live-it-power');
            const euStorageElement = document.getElementById('eu-storage');
            const trendStorageElement = document.getElementById('trend-storage-level'); // In trends list

            const footerTimeElement = document.getElementById('last-updated-time');
            const aiTimeElement = document.getElementById('ai-timestamp');

             const elementsToUpdate = [
                 liveTtfElement, liveUkPowerElement, liveFrPowerElement, liveDePowerElement, liveItPowerElement,
                 liveVolumeElement, liveVolatilityElement, euStorageElement, trendStorageElement
             ]; // Exclude sentiment for now

            // --- Initial Timestamp Population ---
            const initialTime = getCurrentTimestamp();
            if (footerTimeElement) footerTimeElement.textContent = initialTime;
            if (aiTimeElement) aiTimeElement.textContent = initialTime;

             // --- Data Simulation Function ---
            function simulateDataUpdate() {
                 // Simulate TTF Price change (+/- 0.15)
                if (liveTtfElement) {
                    let currentTtf = parseFloat(liveTtfElement.textContent);
                    currentTtf += (Math.random() - 0.5) * 0.3; // Small random fluctuation
                    liveTtfElement.textContent = currentTtf.toFixed(2);
                }

                // Simulate Volume change (+/- 50)
                 if (liveVolumeElement) {
                     let currentVolume = parseInt(liveVolumeElement.textContent.replace(',', ''));
                     currentVolume += Math.floor((Math.random() - 0.5) * 100);
                     liveVolumeElement.textContent = currentVolume.toLocaleString('en-US'); // Add comma back
                 }

                // Simulate Volatility change (+/- 0.1)
                 if (liveVolatilityElement) {
                     let currentVol = parseFloat(liveVolatilityElement.textContent);
                     currentVol += (Math.random() - 0.5) * 0.2;
                     liveVolatilityElement.textContent = Math.max(0.1, currentVol).toFixed(2) + '%'; // Ensure positive
                 }

                // Simulate Sentiment change (randomly)
                if (liveSentimentElement) {
                    const sentiments = ['Neutral', 'Slightly Bullish', 'Slightly Bearish', 'Bullish', 'Bearish'];
                    if (Math.random() < 0.1) { // Change sentiment 10% of the time
                        liveSentimentElement.textContent = sentiments[Math.floor(Math.random() * sentiments.length)];
                    }
                }

                 // Simulate Power Price changes (+/- 1.0)
                 [liveUkPowerElement, liveFrPowerElement, liveDePowerElement, liveItPowerElement].forEach(el => {
                      if (el) {
                          let currentPrice = parseFloat(el.textContent);
                          currentPrice += (Math.random() - 0.5) * 2.0;
                          el.textContent = currentPrice.toFixed(2);
                      }
                 });

                 // Simulate Storage change (+/- 0.1) - Less frequent?
                 if (euStorageElement && Math.random() < 0.2) { // Change 20% of the time
                     let currentStorage = parseFloat(euStorageElement.textContent);
                     currentStorage += (Math.random() - 0.45) * 0.2; // Bias towards slight increase/decrease depending on season maybe?
                     const newStorageVal = Math.max(10, Math.min(99, currentStorage)).toFixed(1); // Clamp between 10-99%
                     euStorageElement.textContent = newStorageVal + '%';
                     if(trendStorageElement) trendStorageElement.textContent = newStorageVal; // Update in trends too
                 }


                // Update timestamp
                const currentTime = getCurrentTimestamp();
                 if (footerTimeElement) footerTimeElement.textContent = currentTime;
                 if (aiTimeElement) aiTimeElement.textContent = currentTime; // Update AI timestamp too


                // Visual Flash Effect
                 elementsToUpdate.forEach(el => {
                     if (el) {
                        el.classList.add('value-updating');
                         // Remove the class after a short delay
                        setTimeout(() => el.classList.remove('value-updating'), 150);
                     }
                 });

            }

            // --- Start Simulation Interval (e.g., every 3 seconds) ---
            // WARNING: In a real app, avoid frequent updates like this without proper backend/websockets.
            // This is purely for visual DEMONSTRATION.
            setInterval(simulateDataUpdate, 3000); // Update every 3000ms (3 seconds)

            // --- Table Row Click Listener (Example) ---
            const tableRows = document.querySelectorAll('.data-table tbody tr');
             tableRows.forEach(row => {
                 row.addEventListener('click', () => {
                     const companyName = row.cells[0].textContent;
                     console.log(`Simulating action for company: ${companyName}`);
                     // alert(`Details for ${companyName} would load here.`); // Example action
                 });
             });

        }); // End DOMContentLoaded
    </script>

</body>
</html>
