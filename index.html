<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEFE - European Energy Trading Dashboard</title>
    <!-- Google Font: Urbanist -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script> <!-- Adapter for time scale -->

    <style>
        /* --- Global Styles & Variables --- */
        :root {
            --sefe-blue: #075a87;
            --sefe-green: #56913c;
            --sefe-light-green: #c2d690;
            --light-gray-border: #ebecec;
            --text-color: #333;
            --background-color: #ffffff;
            --header-height: 70px;
            --footer-height: 50px;
            --up-color: #56913c; /* Green for up movement */
            --neutral-down-color: #777777; /* Neutral grey for down movement */
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        html, body {
            height: 100%;
            font-family: 'Urbanist', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        /* --- Layout --- */
        .dashboard-container { display: flex; flex-direction: column; min-height: 100vh; }
        .dashboard-header { display: flex; align-items: center; padding: 10px 25px; height: var(--header-height); background-color: var(--background-color); border-bottom: 2px solid var(--light-gray-border); position: sticky; top: 0; z-index: 1000; }
        .sefe-logo { max-height: 80%; width: auto; margin-right: 20px; }
        .dashboard-title { color: var(--sefe-blue); font-size: 1.8em; font-weight: 700; }
        .dashboard-main { flex-grow: 1; padding: 25px; background-color: #f9f9f9; padding-bottom: calc(var(--footer-height) + 25px); }

        /* --- Introduction --- */
        .intro-summary { background-color: var(--background-color); padding: 15px 20px; margin-bottom: 25px; border: 1px solid var(--light-gray-border); border-left: 4px solid var(--sefe-blue); border-radius: 5px; font-size: 1em; line-height: 1.7; }
        .intro-summary strong { color: var(--sefe-blue); }
        .important-note { font-weight: bold; color: var(--sefe-blue); }

        /* --- Section Styling --- */
        .dashboard-section { background-color: var(--background-color); padding: 20px; margin-bottom: 25px; border: 1px solid var(--light-gray-border); border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .section-title { color: var(--sefe-blue); font-size: 1.5em; font-weight: 700; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid var(--light-gray-border); }

        /* --- Row container for side-by-side sections --- */
        .analysis-row {
             display: flex;
             flex-wrap: wrap;
             gap: 25px; /* Match main section gap */
             margin-bottom: 25px; /* Add margin below the row */
        }
         .analysis-row > .dashboard-section {
             flex: 1; /* Each section takes equal space */
             min-width: 350px; /* Minimum width before wrapping */
             margin-bottom: 0; /* Remove bottom margin since row handles it */
             display: flex; /* Allow content to grow */
             flex-direction: column;
         }


        /* --- Data Cards / Grids --- */
        .data-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .country-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .key-stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .data-card, .country-card, .key-stat-card { border: 1px solid var(--light-gray-border); border-radius: 5px; padding: 15px; background-color: #fff; text-align: center; position: relative; }
        .data-card h4, .country-card h4, .key-stat-card h4 { font-size: 0.9em; color: #555; margin-bottom: 8px; font-weight: 500; text-transform: uppercase; min-height: 2.2em; /* Prevent resizing */ }
        .data-card .value, .country-card .value, .key-stat-card .value { font-size: 1.4em; font-weight: 700; color: var(--sefe-green); transition: color 0.3s ease, background-color 0.3s ease; }
        .country-card .value { color: var(--sefe-blue); }
        .key-stat-card .value { color: var(--sefe-blue); font-size: 1.6em; }
        .value-updating { background-color: rgba(194, 214, 144, 0.3); transition: background-color 0.1s ease; }
        .country-card h3 { color: var(--sefe-blue); margin-bottom: 15px; text-align: left; font-size: 1.2em; }
        .country-data-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        .value.up { color: var(--up-color); }
        .value.down-neutral { color: var(--neutral-down-color); }


        /* --- Charts --- */
        .chart-container-wrapper { flex: 1; min-width: 300px; display: flex; flex-direction: column; }
        .chart-container { position: relative; height: 280px; width: 100%; margin-top: 15px; border: 1px solid var(--light-gray-border); padding: 10px; border-radius: 5px; margin-bottom: 10px; flex-grow: 1; }
        .country-chart-container { position: relative; height: 180px; width: 100%; margin-top: 15px; margin-bottom: 10px; }
        .live-chart-container { height: 250px; }


        /* --- Tables --- */
        .data-table { width: 100%; border-collapse: collapse; margin-top: 15px; margin-bottom: 10px; }
        .data-table th, .data-table td { border: 1px solid var(--light-gray-border); padding: 10px 12px; text-align: left; vertical-align: middle; font-size: 0.95em; }
        .data-table thead th { background-color: var(--sefe-blue); color: white; font-weight: 500; position: sticky; top: var(--header-height); z-index: 10; }
        .data-table tbody tr:nth-child(even) { background-color: #f8f9fa; }
        .data-table tbody tr:hover { background-color: var(--sefe-light-green); cursor: pointer; }
        .data-table a { color: var(--sefe-green); text-decoration: none; font-weight: 500; }
        .data-table a:hover { text-decoration: underline; }


        /* --- Summary Notes --- */
        .summary-note { font-size: 0.85em; font-style: italic; color: #555; margin-top: auto; /* Push note to bottom */ padding: 8px; background-color: #f8f9fa; border-left: 3px solid var(--sefe-light-green); border-radius: 0 4px 4px 0; }

        /* --- Market Trends List --- */
        .trends-list { list-style: none; padding-left: 0; margin-bottom: 10px; }
        .trends-list li { padding: 8px 0; border-bottom: 1px dashed var(--light-gray-border); }
        .trends-list li:last-child { border-bottom: none; }
        .trends-list strong { color: var(--sefe-green); }

        /* --- AI Timestamps --- */
        .ai-timestamp { font-size: 0.8em; color: #777; text-align: right; margin-bottom: 15px; /* Removed negative margin */ }

        /* --- AI Suggestions --- */
        .ai-suggestions-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
        .suggestion-card { border: 1px solid var(--light-gray-border); border-left: 4px solid var(--sefe-green); border-radius: 5px; padding: 15px; background-color: #fdfdfd; }
        .suggestion-card h4 { color: var(--sefe-blue); margin-bottom: 8px; font-size: 1.1em; }
        .suggestion-card p { font-size: 0.95em; color: #444; }

        /* --- AI Key Trend Analysis --- */
         #ai-trend-analysis ul { list-style: none; padding: 0; margin-top: 10px; flex-grow: 1; /* Allow list to take space */ }
         #ai-trend-analysis li { padding: 10px 12px; margin-bottom: 8px; border-left: 4px solid var(--sefe-blue); background-color: #f8f9fa; border-radius: 0 4px 4px 0; font-size: 0.95em; transition: background-color 0.3s ease; }
         #ai-trend-analysis li.updating { background-color: rgba(194, 214, 144, 0.2); transition: background-color 0.1s ease; }
         #ai-trend-analysis li strong { font-weight: 600; color: var(--sefe-blue); }
         #ai-trend-analysis li span.trend-value { font-weight: bold; }


        /* --- News Feed --- */
        #news-feed ul { list-style: none; padding: 0; }
        #news-feed li { border: 1px solid var(--light-gray-border); border-radius: 5px; padding: 15px; margin-bottom: 15px; background-color: #fff; }
        #news-feed h4 { margin-bottom: 5px; color: var(--sefe-blue); font-size: 1.1em; }
        #news-feed .news-summary { font-size: 0.95em; margin-bottom: 10px; color: #444; }
        #news-feed .news-source { font-size: 0.85em; color: #666; }
        #news-feed .news-source a { color: var(--sefe-green); text-decoration: none; }
        #news-feed .news-source a:hover { text-decoration: underline; }
        #news-feed .news-timestamp { float: right; color: #888; font-size: 0.8em; }

        /* --- Footer --- */
        .dashboard-footer { height: var(--footer-height); padding: 15px 25px; background-color: var(--sefe-blue); color: #e0e0e0; text-align: center; font-size: 0.85em; border-top: 1px solid var(--light-gray-border); position: fixed; bottom: 0; left: 0; width: 100%; z-index: 1000; }
        .dashboard-footer p { margin: 0; }
        #last-updated-time { font-weight: 500; color: #fff; }
        /* Footer color fix for important note */
        .dashboard-footer .important-note {
             color: #ffffff; /* White or light grey to be visible on blue */
             font-weight: normal; /* Optional: Make it less bold */
             font-style: italic;
         }

        /* --- Sources --- */
        .sources-list { list-style: disc; padding-left: 20px; font-size: 0.9em; columns: 2; -webkit-columns: 2; -moz-columns: 2; gap: 20px; }
        .sources-list li { margin-bottom: 5px; }
        .sources-list a { color: var(--sefe-green); text-decoration: none; }
        .sources-list a:hover { text-decoration: underline; }

        /* --- Responsive Adjustments --- */
        @media (max-width: 992px) {
             .analysis-row { flex-direction: column; gap: 0; margin-bottom: 0;} /* Stack elements */
             .analysis-row > .dashboard-section { min-width: 100%; margin-bottom: 25px; } /* Restore bottom margin when stacked */
              .analysis-row > .dashboard-section:last-child { margin-bottom: 0; } /* Remove margin from last element in row */
        }

        @media (max-width: 768px) {
            .dashboard-title { font-size: 1.4em; }
            .data-grid { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
            .country-grid { grid-template-columns: 1fr; }
            .key-stats-grid { grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); }
            .section-title { font-size: 1.3em; }
            .data-card .value, .country-card .value, .key-stat-card .value { font-size: 1.2em; }
            .key-stat-card .value { font-size: 1.4em; }
            .data-table th, .data-table td { padding: 8px; font-size: 0.9em; }
            .ai-suggestions-grid { grid-template-columns: 1fr; }
            .sources-list { columns: 1; -webkit-columns: 1; -moz-columns: 1; }
            .dashboard-footer { font-size: 0.8em; padding: 10px 15px; }
            #news-feed h4 { font-size: 1em; }
            .intro-summary { font-size: 0.95em; }
            #ai-trend-analysis li { font-size: 0.9em; }
            .analysis-row > .dashboard-section { min-width: 100%; } /* Ensure full width when stacked */
        }
         @media (max-width: 480px) {
             .dashboard-header { padding: 5px 15px; height: 60px; }
             .dashboard-title { font-size: 1.1em; }
             .sefe-logo { max-height: 70%; margin-right: 10px; }
             .dashboard-main { padding: 15px; padding-bottom: calc(var(--footer-height) + 15px); }
             .data-grid, .key-stats-grid { grid-template-columns: 1fr 1fr; }
             .data-card h4, .key-stat-card h4 { font-size: 0.8em; min-height: 3em; } /* Adjust height for smaller titles */
             .data-card .value, .key-stat-card .value { font-size: 1.1em; }
             .key-stat-card .value { font-size: 1.2em; }
             .country-data-grid { grid-template-columns: 1fr; }
             .chart-container { height: 220px; }
             .country-chart-container { height: 150px; }
             .live-chart-container { height: 200px; }
         }

    </style>
</head>
<body>
    <div class="dashboard-container">
        <header class="dashboard-header">
            <img src="https://cdn01.sefe-energy.com/media/a22bjozn/sefe_logo_rgb-website.png?width=1920&height=1080&rnd=133432403393430000&quality=55" alt="SEFE Logo" class="sefe-logo">
            <h1 class="dashboard-title">European Energy Trading Dashboard</h1>
        </header>

        <main class="dashboard-main">

             <!-- Introduction Summary -->
            <div class="intro-summary">
                The <strong>SEFE European Energy Trading Dashboard</strong> offers a comprehensive demonstration of the key macroeconomic indicators, energy market fundamentals, company data, and simulated real-time price movements relevant to European energy trading. It is designed to provide rapid insights into market trends, monitor major indices, and stay updated with relevant news developments.
                <br><br>
                This dashboard serves as a demonstration of my core skillsets, analytical methods, strategic approach, visual design style, and ability to translate complex data into actionable insights.
                <br><br>
                <span class="important-note">Please note: All 'live' data and charts presented are entirely simulated for demonstration purposes and do not represent actual real-time market data. Access to genuine real-time financial data requires dedicated backend infrastructure and licensed data providers.</span>
            </div>

             <!-- Key Market Statistics (Simulated) -->
            <section class="dashboard-section" id="key-market-stats">
                <h2 class="section-title">Key Market Statistics (Simulated Real-Time)</h2>
                <div class="key-stats-grid">
                    <div class="key-stat-card"><h4>TTF Gas Price (â‚¬/MWh)</h4><p class="value" id="live-ttf-price">28.75</p></div>
                    <div class="key-stat-card"><h4>Traded Volume (GWh/Day)</h4><p class="value" id="live-volume">1,250</p></div>
                    <div class="key-stat-card"><h4>Market Volatility (TTF % 1D)</h4><p class="value" id="live-volatility">1.85%</p></div>
                    <div class="key-stat-card"><h4>Market Sentiment</h4><p class="value" id="live-sentiment">Neutral</p></div>
                </div>
                 <p class="summary-note">
                    Core indicators showing current simulated TTF gas price, daily traded volume estimate, short-term price volatility, and overall market sentiment. Values update frequently to mimic live ticker behavior.
                </p>
            </section>

            <!-- NEW Analysis Row for side-by-side Ticker and AI Trends -->
            <div class="analysis-row">
                <!-- Live Ticker Chart Section -->
                <section class="dashboard-section" id="live-charts">
                    <h2 class="section-title">Live Price Simulation (TTF Gas)</h2>
                    <div class="chart-container-wrapper" style="flex-grow: 1;"> <!-- Ensure wrapper grows -->
                        <div class="chart-container live-chart-container">
                            <canvas id="liveTickerChart"></canvas>
                        </div>
                    </div>
                    <p class="summary-note">
                        Simulated live price ticker for TTF Gas (â‚¬/MWh), showing the last ~30 updates. Illustrates short-term price fluctuations.
                    </p>
                </section>

                <!-- AI Key Trend Analysis Section -->
                <section class="dashboard-section" id="ai-trend-analysis">
                    <h2 class="section-title">AI Key Trend Analysis (Simulated)</h2>
                    <p class="ai-timestamp">Based on data at: <span id="ai-trend-timestamp">Loading...</span></p>
                    <ul>
                        <li id="ai-trend-1">Initializing trend analysis...</li>
                        <li id="ai-trend-2">Monitoring market data...</li>
                        <li id="ai-trend-3">Assessing price movements...</li>
                        <li id="ai-trend-4">Evaluating volatility signals...</li>
                        <li id="ai-trend-5">Analyzing fundamental indicators...</li>
                    </ul>
                    <p class="summary-note">
                        This section provides simulated AI-generated bullet points highlighting key observations based on the dashboard's current (simulated) data. Updates reflect changing market conditions.
                    </p>
                </section>
            </div> <!-- End of analysis-row -->


            <!-- 1. European Macro Overview -->
            <section class="dashboard-section" id="europe-macro">
                <h2 class="section-title">European Macro & Fundamentals</h2>
                <div class="data-grid">
                     <div class="data-card"><h4>EU GDP Growth (QoQ)</h4><p class="value" id="eu-gdp">0.3%</p></div>
                    <div class="data-card"><h4>Eurozone Inflation (YoY)</h4><p class="value" id="eu-inflation">2.4%</p></div>
                    <div class="data-card"><h4>ECB Interest Rate</h4><p class="value" id="eu-interest-rate">4.50%</p></div>
                     <div class="data-card"><h4>Gas Storage (EU Avg %)</h4><p class="value" id="eu-storage">65.2%</p></div>
                    <div class="data-card"><h4>Carbon Price (EUA â‚¬/t)</h4><p class="value" id="live-carbon-price">â‚¬65.50</p></div>
                     <div class="data-card"><h4>Brent Crude ($/bbl)</h4><p class="value" id="live-brent-price">$82.10</p></div>
                </div>
                <div class="chart-container">
                    <canvas id="europeGasChart"></canvas>
                </div>
                <p class="summary-note">
                    Chart shows simulated historical TTF gas price trends (longer term). Macro indicators provide context. Current values for Carbon, Brent, and Storage are also simulated.
                </p>
            </section>

            <!-- 2. Key Country Focus -->
            <section class="dashboard-section" id="key-countries">
                 <h2 class="section-title">Key Country Focus (Simulated Power Prices)</h2>
                <div class="country-grid">
                     <!-- United Kingdom -->
                    <article class="country-card" id="country-uk">
                        <h3>ðŸ‡¬ðŸ‡§ United Kingdom</h3>
                         <div class="country-data-grid">
                             <div class="data-card"><h4>GDP Growth</h4><p class="value">0.1%</p></div>
                             <div class="data-card"><h4>Inflation</h4><p class="value">3.2%</p></div>
                             <div class="data-card"><h4>NBP Gas (â‚¬/MWh)</h4><p class="value" id="live-nbp-price">â‚¬28.10</p></div>
                             <div class="data-card"><h4>Power Price (Â£/MWh)</h4><p class="value" id="live-uk-power">75.50</p></div>
                         </div>
                        <div class="country-chart-container"><canvas id="ukPowerChart"></canvas></div>
                        <p class="summary-note">UK power price simulation influenced by NBP gas, wind output assumptions, and interconnectors.</p>
                    </article>
                    <!-- France -->
                    <article class="country-card" id="country-fr">
                         <h3>ðŸ‡«ðŸ‡· France</h3>
                         <div class="country-data-grid">
                            <div class="data-card"><h4>GDP Growth</h4><p class="value">0.2%</p></div>
                            <div class="data-card"><h4>Inflation</h4><p class="value">2.2%</p></div>
                            <div class="data-card"><h4>PEG Gas (â‚¬/MWh)</h4><p class="value" id="live-peg-price">â‚¬28.50</p></div>
                            <div class="data-card"><h4>Power Price (â‚¬/MWh)</h4><p class="value" id="live-fr-power">45.80</p></div>
                        </div>
                        <div class="country-chart-container"><canvas id="frPowerChart"></canvas></div>
                         <p class="summary-note">French power simulation driven by nuclear availability assumptions and PEG gas price.</p>
                    </article>
                    <!-- Germany -->
                    <article class="country-card" id="country-de">
                         <h3>ðŸ‡©ðŸ‡ª Germany</h3>
                         <div class="country-data-grid">
                             <div class="data-card"><h4>GDP Growth</h4><p class="value">-0.2%</p></div>
                             <div class="data-card"><h4>Inflation</h4><p class="value">2.3%</p></div>
                             <div class="data-card"><h4>THE Gas (â‚¬/MWh)</h4><p class="value" id="live-the-price">â‚¬28.90</p></div>
                             <div class="data-card"><h4>Power Price (â‚¬/MWh)</h4><p class="value" id="live-de-power">60.20</p></div>
                         </div>
                         <div class="country-chart-container"><canvas id="dePowerChart"></canvas></div>
                         <p class="summary-note">German power simulation sensitive to renewable forecasts (wind/solar) and THE gas price.</p>
                    </article>
                    <!-- Italy -->
                    <article class="country-card" id="country-it">
                         <h3>ðŸ‡®ðŸ‡¹ Italy</h3>
                          <div class="country-data-grid">
                             <div class="data-card"><h4>GDP Growth</h4><p class="value">0.3%</p></div>
                             <div class="data-card"><h4>Inflation</h4><p class="value">1.0%</p></div>
                             <div class="data-card"><h4>PSV Gas (â‚¬/MWh)</h4><p class="value" id="live-psv-price">â‚¬29.50</p></div>
                             <div class="data-card"><h4>Power Price (â‚¬/MWh)</h4><p class="value" id="live-it-power">90.10</p></div>
                          </div>
                        <div class="country-chart-container"><canvas id="itPowerChart"></canvas></div>
                          <p class="summary-note">Italian power simulation showing premium, driven by PSV gas price and import dependency assumptions.</p>
                    </article>
                </div>
            </section>

             <!-- AI Suggested Trading Actions -->
            <section class="dashboard-section" id="ai-suggestions">
                <h2 class="section-title">AI Suggested Trading Actions (Simulated)</h2>
                 <p class="ai-timestamp">Based on data at: <span id="ai-suggestions-timestamp">Loading...</span></p>
                <div class="ai-suggestions-grid">
                     <div class="suggestion-card"><h4>TTF Gas</h4><p>Consider Short M+1 vs M+2: Slight contango observed, potential softening demand outlook based on weather forecasts. Monitor storage injection rates closely.</p></div>
                     <div class="suggestion-card"><h4>Spreads</h4><p>DE-FR Power Spread: Potential widening opportunity if French nuclear outlook improves faster than German wind forecast. Monitor availability reports.</p></div>
                     <div class="suggestion-card"><h4>Risk</h4><p>Geopolitical Alert: Increased monitoring recommended for flows via Ukraine/Turkey routes due to recent reports. Consider reducing exposure on far-curve contracts.</p></div>
                     <div class="suggestion-card"><h4>General</h4><p>Carbon Market (EUA): Price holding support level. Upside potential if industrial activity picks up or regulatory news firms prices. Hold existing length.</p></div>
                </div>
                 <p class="summary-note">
                    These are *example* trading ideas generated by a hypothetical AI analyzing market data. They are for demonstration only and do not constitute financial advice.
                </p>
            </section>

            <!-- 3. Company Research -->
            <section class="dashboard-section" id="company-research">
                 <h2 class="section-title">Company Research (Sample Data & Links)</h2>
                <table class="data-table">
                     <thead><tr><th>Company</th><th>Ticker</th><th>Sector</th><th>Market Cap</th><th>P/E Ratio</th><th>Recent News Snippet</th></tr></thead>
                     <tbody>
                        <tr><td><a href="https://www.rwe.com/" target="_blank" rel="noopener noreferrer">RWE AG</a></td><td>RWE.DE</td><td>Utility / Renewables</td><td>â‚¬25.5B</td><td>8.5</td><td>Announced new offshore wind project investment...</td></tr>
                        <tr><td><a href="https://www.engie.com/" target="_blank" rel="noopener noreferrer">Engie SA</a></td><td>ENGI.PA</td><td>Utility / Energy Services</td><td>â‚¬34.2B</td><td>7.2</td><td>Reported stable Q1 earnings, focus on energy transition...</td></tr>
                        <tr><td><a href="https://www.enel.com/" target="_blank" rel="noopener noreferrer">Enel SpA</a></td><td>ENEL.MI</td><td>Utility / Renewables</td><td>â‚¬68.0B</td><td>11.3</td><td>Expanding grid modernization efforts in South America...</td></tr>
                        <tr><td><a href="https://www.sse.com/" target="_blank" rel="noopener noreferrer">SSE plc</a></td><td>SSE.L</td><td>Utility / Networks</td><td>Â£19.8B</td><td>9.1</td><td>Updates guidance on renewables output for FY...</td></tr>
                         <tr><td><a href="https://orsted.com/" target="_blank" rel="noopener noreferrer">Ã˜rsted A/S</a></td><td>ORSTED.CO</td><td>Renewables</td><td>DKK 170B</td><td>15.5</td><td>Final investment decision reached on major US offshore wind farm...</td></tr>
                    </tbody>
                </table>
                 <p class="summary-note">
                    Overview of key European energy players with simulated fundamental data and links to official websites. News snippets highlight recent relevant events.
                </p>
            </section>

             <!-- News Feed -->
            <section class="dashboard-section" id="news-feed">
                <h2 class="section-title">Energy Market News Feed (Sample Headlines)</h2>
                 <p class="important-note" style="margin-bottom: 15px;">Note: This is a static list of sample news items for demonstration. A real news feed requires backend integration.</p>
                <ul>
                     <li><span class="news-timestamp">May 14, 2024, 10:30 GMT</span><h4>EU Agrees Stricter Methane Emission Rules for Energy Sector</h4><p class="news-summary">New regulations targeting methane leaks from oil, gas, and coal infrastructure aim to curb potent greenhouse gas emissions across the bloc...</p><p class="news-source">Source: <a href="https://eur-lex.europa.eu" target="_blank" rel="noopener noreferrer">EUR-Lex (Simulated Link)</a></p></li>
                     <li><span class="news-timestamp">May 14, 2024, 09:15 GMT</span><h4>High Wind Output Pushes German Power Prices Negative Briefly</h4><p class="news-summary">Strong overnight wind generation combined with low demand led to negative day-ahead auction results for several hours in Germany...</p><p class="news-source">Source: <a href="https://www.eex.com" target="_blank" rel="noopener noreferrer">EEX (Simulated Link)</a></p></li>
                     <li><span class="news-timestamp">May 13, 2024, 15:00 GMT</span><h4>Analysts Watch Gas Storage Levels as Injection Season Progresses</h4><p class="news-summary">European gas storage facilities continue to fill, currently above the 5-year average, providing a cushion against potential supply disruptions...</p><p class="news-source">Source: <a href="https://agsi.gie.eu" target="_blank" rel="noopener noreferrer">AGSI+ GIE (Simulated Link)</a></p></li>
                     <li><span class="news-timestamp">May 13, 2024, 11:45 GMT</span><h4>Carbon EUA Prices Find Support Near â‚¬65 Level Amidst Market Uncertainty</h4><p class="news-summary">The EU ETS carbon price stabilized after recent volatility, with traders assessing industrial demand signals and upcoming policy news...</p><p class="news-source">Source: <a href="https://carbon-pulse.com" target="_blank" rel="noopener noreferrer">Carbon Pulse (Simulated Link)</a></p></li>
                </ul>
            </section>

            <!-- 4. Market Trends & Highlights -->
            <section class="dashboard-section" id="market-trends">
                 <h2 class="section-title">Market Trends & Highlights</h2>
                 <ul class="trends-list">
                    <li><strong>Geopolitical Tensions:</strong> Ongoing monitoring of supply risks impacting gas prices.</li>
                    <li><strong>Renewable Integration:</strong> Challenges & opportunities from high variable renewable energy penetration.</li>
                    <li><strong>Regulatory Landscape:</strong> Focus on Fit-for-55 implementation, hydrogen strategies, and methane regulations.</li>
                    <li><strong>Storage Dynamics:</strong> High gas storage levels currently dampening prompt price volatility.</li>
                    <li><strong>Weather Impact:</strong> Seasonal demand patterns, hydro levels, and wind/solar forecasts remain key short-term drivers.</li>
                 </ul>
                 <p class="summary-note">Summary of current key factors influencing European energy markets.</p>
            </section>

             <!-- 5. Data Sources -->
            <section class="dashboard-section" id="data-sources">
                 <h2 class="section-title">Data Source References (Examples)</h2>
                 <p><i>Note: Direct real-time data fetching from these sources typically requires backend integration, APIs, and/or subscriptions.</i></p>
                 <ul class="sources-list">
                     <li><a href="https://transparency.entsoe.eu" target="_blank" rel="noopener noreferrer">ENTSO-E Transparency Platform</a></li><li><a href="https://www.theice.com" target="_blank" rel="noopener noreferrer">ICE</a></li><li><a href="https://www.eex.com" target="_blank" rel="noopener noreferrer">EEX</a></li><li><a href="https://www.nordpoolgroup.com" target="_blank" rel="noopener noreferrer">Nord Pool</a></li><li><a href="https://tradingeconomics.com" target="_blank" rel="noopener noreferrer">Trading Economics</a></li><li><a href="https://energy.ec.europa.eu/data-and-analysis/market-analysis_en" target="_blank" rel="noopener noreferrer">EU Energy Market Observatory</a></li><li><a href="https://meteomatics.com" target="_blank" rel="noopener noreferrer">Meteomatics</a></li><li><a href="https://open-meteo.com" target="_blank" rel="noopener noreferrer">Open-Meteo</a></li><li><a href="https://cds.climate.copernicus.eu" target="_blank">Copernicus Climate Data Store</a></li><li><a href="https://api.windy.com" target="_blank" rel="noopener noreferrer">Windy.com API</a></li><li><a href="https://agsi.gie.eu" target="_blank" rel="noopener noreferrer">AGSI+ (Gas Infrastructure Europe)</a></li><li><a href="https://transparency.entsog.eu" target="_blank" rel="noopener noreferrer">ENTSOG Transparency Platform</a></li><li><a href="https://www.eea.europa.eu" target="_blank" rel="noopener noreferrer">EEA</a></li><li><a href="https://carbon-pulse.com" target="_blank" rel="noopener noreferrer">Carbon Pulse</a></li><li><a href="https://eur-lex.europa.eu" target="_blank" rel="noopener noreferrer">EUR-Lex</a></li><li><a href="https://data.nasdaq.com" target="_blank" rel="noopener noreferrer">Nasdaq Data Link (Quandl)</a></li>
                 </ul>
            </section>

        </main>

        <footer class="dashboard-footer">
             <p>SEFE Energy Trading Dashboard Demo by Don Spampinato Â© 2025. <span class="important-note">Data is simulated for demonstration purposes only.</span> Last simulated update: <span id="last-updated-time">Loading...</span></p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Chart.js Global Defaults ---
            Chart.defaults.font.family = 'Urbanist';
            Chart.defaults.plugins.tooltip.mode = 'index';
            Chart.defaults.plugins.tooltip.intersect = false;
            Chart.defaults.plugins.tooltip.titleFont = { family: 'Urbanist', weight: 'bold' };
            Chart.defaults.plugins.tooltip.bodyFont = { family: 'Urbanist' };

            // --- Chart Instances ---
            let europeGasChart, ukPowerChart, frPowerChart, dePowerChart, itPowerChart, liveTickerChart;

            // --- Shared Chart Options ---
            const commonChartOptions = { responsive: true, maintainAspectRatio: false };
            const commonLineOptions = { ...commonChartOptions, scales: { x: { grid: { display: false } }, y: { grid: { color: '#e0e0e0', borderDash: [2, 3] } } }, elements: { line: { tension: 0.1 } } };
            const commonCountryOptions = { ...commonLineOptions, plugins: { legend: { display: false } }, scales: { x: { ...commonLineOptions.scales.x, ticks: { maxTicksLimit: 6 } }, y: { ...commonLineOptions.scales.y, ticks: { maxTicksLimit: 5 } } }, elements: { point: { radius: 2, hoverRadius: 4 } } };

            // --- Chart Initialization ---

            // Longer Term Gas Chart
            const europeGasCtx = document.getElementById('europeGasChart')?.getContext('2d');
            if (europeGasCtx) {
                try {
                    europeGasChart = new Chart(europeGasCtx, {
                        type: 'line',
                        data: { labels: ['Oct', 'Nov', 'Dec', 'Jan', 'Feb', 'Mar', 'Apr', 'May'], datasets: [{ label: 'TTF Gas Price (â‚¬/MWh)', data: [36, 39, 41, 45, 42, 38, 30, 28.75], borderColor: 'var(--sefe-blue)', backgroundColor: 'rgba(7, 90, 135, 0.1)', borderWidth: 2, fill: true, pointBackgroundColor: 'var(--sefe-blue)' }] },
                        options: { ...commonLineOptions, plugins: { title: { display: true, text: 'European Gas Price Trend (TTF - Simulated Historical)', font: { size: 14, weight: 'bold' }, color: 'var(--sefe-blue)' }, legend: { display: true } } }
                    });
                } catch (e) { console.error("Error creating Europe Gas Chart:", e); }
            } else { console.error("Canvas context not found for europeGasChart"); }

            // Country Charts
             const createCountryChart = (id, data, color) => {
                 const ctx = document.getElementById(id)?.getContext('2d');
                 if (!ctx) {
                     console.error(`Canvas context not found for ${id}`);
                     return null;
                 }
                 try {
                     return new Chart(ctx, { type: 'line', data: { labels: ['W1', 'W2', 'W3', 'W4', 'W5', 'W6', 'W7', 'W8'], datasets: [{ label: 'Power Price', data: data, borderColor: color, backgroundColor: `${color}1A`, borderWidth: 1.5, fill: false, pointBackgroundColor: color }] }, options: commonCountryOptions });
                 } catch(e) { console.error(`Error creating chart ${id}:`, e); return null; }
             };
             ukPowerChart = createCountryChart('ukPowerChart', [82, 78, 70, 72, 75, 78, 80, 75.5], 'var(--sefe-green)');
             frPowerChart = createCountryChart('frPowerChart', [50, 45, 40, 42, 45, 48, 52, 45.8], 'var(--sefe-green)');
             dePowerChart = createCountryChart('dePowerChart', [65, 60, 55, 58, 60, 63, 68, 60.2], 'var(--sefe-green)');
             itPowerChart = createCountryChart('itPowerChart', [95, 90, 85, 88, 90, 92, 98, 90.1], 'var(--sefe-green)');


            // Live Ticker Chart
            const liveTickerCtx = document.getElementById('liveTickerChart')?.getContext('2d');
             const TICKER_POINTS = 30;
             const initialTickerData = Array(TICKER_POINTS).fill(28.75);
             const initialTickerLabels = Array(TICKER_POINTS).fill(new Date().getTime());
            if (liveTickerCtx) {
                 try {
                    liveTickerChart = new Chart(liveTickerCtx, {
                        type: 'line', data: { labels: initialTickerLabels, datasets: [{ label: 'TTF Gas (â‚¬/MWh)', data: initialTickerData, borderColor: 'var(--sefe-blue)', borderWidth: 1.5, pointRadius: 0, fill: false, stepped: false }] },
                        options: {
                             ...commonLineOptions,
                             scales: { x: { type: 'time', time: { unit: 'second', displayFormats: { second: 'HH:mm:ss' } }, ticks: { maxTicksLimit: 6, source: 'auto' }, grid: { display: false } }, y: { grid: { color: '#e0e0e0', borderDash: [2, 3] } } },
                             plugins: { legend: { display: false }, title: { display: true, text: 'TTF Price (Simulated Live)', color: 'var(--sefe-blue)' } }
                        }
                    });
                } catch(e) { console.error("Error creating Live Ticker Chart:", e); }
            } else { console.error("Canvas context not found for liveTickerChart"); }


            // --- DOM Element References ---
            // (Get elements by ID - ensure IDs are correct)
            const liveTtfElement = document.getElementById('live-ttf-price');
            const liveVolumeElement = document.getElementById('live-volume');
            const liveVolatilityElement = document.getElementById('live-volatility');
            const liveSentimentElement = document.getElementById('live-sentiment');
            const liveCarbonElement = document.getElementById('live-carbon-price');
            const liveBrentElement = document.getElementById('live-brent-price');
            const liveNbpElement = document.getElementById('live-nbp-price');
            const livePegElement = document.getElementById('live-peg-price');
            const liveTheElement = document.getElementById('live-the-price');
            const livePsvElement = document.getElementById('live-psv-price');
            const liveUkPowerElement = document.getElementById('live-uk-power');
            const liveFrPowerElement = document.getElementById('live-fr-power');
            const liveDePowerElement = document.getElementById('live-de-power');
            const liveItPowerElement = document.getElementById('live-it-power');
            const euStorageElement = document.getElementById('eu-storage');
            const footerTimeElement = document.getElementById('last-updated-time'); // Corrected reference check
            const aiSuggestTimeElement = document.getElementById('ai-suggestions-timestamp');
            const aiTrendTimeElement = document.getElementById('ai-trend-timestamp');

             const trendElements = [
                 document.getElementById('ai-trend-1'), document.getElementById('ai-trend-2'), document.getElementById('ai-trend-3'), document.getElementById('ai-trend-4'), document.getElementById('ai-trend-5')
             ].filter(el => el !== null); // Filter out nulls if IDs are wrong

            const elementsToFlash = [liveTtfElement, liveCarbonElement, liveBrentElement, liveNbpElement, livePegElement, liveTheElement, livePsvElement, liveUkPowerElement, liveFrPowerElement, liveDePowerElement, liveItPowerElement, liveVolumeElement, liveVolatilityElement, euStorageElement, ...trendElements]
                .filter(el => el !== null); // Ensure elements exist before flashing

             let lastValues = {
                 ttf: 28.75, brent: 82.10, carbon: 65.50, volatility: 1.85, storage: 65.2
             };

             // --- Timestamp Function ---
            function getCurrentTimestamp() { return new Date().toLocaleString('en-GB', { dateStyle: 'medium', timeStyle: 'medium' }); }

            // --- Simulation Update Function ---
            function simulateDataUpdate() {
                let currentTtf=lastValues.ttf, currentBrent=lastValues.brent, currentCarbon=lastValues.carbon, currentVolume, currentVol=lastValues.volatility, currentNbp, currentPeg, currentThe, currentPsv, currentStorage=lastValues.storage;
                let ttfUpdate = { change: 0 }, carbonUpdate = { change: 0 }; // Initialize change objects

                // --- Simulate Price/Value Changes ---
                 const simulateChange = (currentValue, volatilityFactor = 0.01, precision = 2) => {
                    if (isNaN(currentValue)) currentValue = 0; // Handle potential NaN
                    const change = (Math.random() - 0.5) * currentValue * volatilityFactor * 2;
                    const newValue = parseFloat((currentValue + change).toFixed(precision));
                    const direction = change > 0.001 ? 'up' : (change < -0.001 ? 'down-neutral' : '');
                    return { value: newValue, direction: direction, change: change };
                 };

                // Simulate Core Prices
                 ttfUpdate = simulateChange(lastValues.ttf, 0.005);
                 currentTtf = ttfUpdate.value;
                 if (liveTtfElement) updateValue(liveTtfElement, currentTtf.toFixed(2), ttfUpdate.direction);

                 const brentUpdate = simulateChange(lastValues.brent, 0.004);
                 currentBrent = brentUpdate.value;
                 if (liveBrentElement) updateValue(liveBrentElement, '$' + currentBrent.toFixed(2), brentUpdate.direction);

                 carbonUpdate = simulateChange(lastValues.carbon, 0.006);
                 currentCarbon = carbonUpdate.value;
                 if (liveCarbonElement) updateValue(liveCarbonElement, 'â‚¬' + currentCarbon.toFixed(2), carbonUpdate.direction);

                // Simulate Hub Gas Prices
                 if (!isNaN(currentTtf)) {
                    currentNbp = parseFloat((currentTtf * 0.99 + (Math.random()-0.5)*0.2).toFixed(2));
                    currentPeg = parseFloat((currentTtf * 0.995 + (Math.random()-0.5)*0.2).toFixed(2));
                    currentThe = parseFloat((currentTtf * 1.005 + (Math.random()-0.5)*0.2).toFixed(2));
                    currentPsv = parseFloat((currentTtf * 1.02 + (Math.random()-0.5)*0.3).toFixed(2));
                    if(liveNbpElement) updateValue(liveNbpElement, 'â‚¬' + currentNbp.toFixed(2));
                    if(livePegElement) updateValue(livePegElement, 'â‚¬' + currentPeg.toFixed(2));
                    if(liveTheElement) updateValue(liveTheElement, 'â‚¬' + currentThe.toFixed(2));
                    if(livePsvElement) updateValue(livePsvElement, 'â‚¬' + currentPsv.toFixed(2));
                 }

                // Simulate Power Prices
                if (liveUkPowerElement) updateValue(liveUkPowerElement, simulateChange(parseFloat(liveUkPowerElement.textContent || '0'), 0.015).value.toFixed(2));
                if (liveFrPowerElement) updateValue(liveFrPowerElement, simulateChange(parseFloat(liveFrPowerElement.textContent || '0'), 0.018).value.toFixed(2));
                if (liveDePowerElement) updateValue(liveDePowerElement, simulateChange(parseFloat(liveDePowerElement.textContent || '0'), 0.02).value.toFixed(2));
                if (liveItPowerElement) updateValue(liveItPowerElement, simulateChange(parseFloat(liveItPowerElement.textContent || '0'), 0.012).value.toFixed(2));

                // Simulate Volume & Volatility
                if (liveVolumeElement) { currentVolume = parseInt((liveVolumeElement.textContent || '0').replace(/,/g, '')) + Math.floor((Math.random() - 0.5) * 50); updateValue(liveVolumeElement, currentVolume.toLocaleString('en-US')); }
                if (liveVolatilityElement) { let volText = (liveVolatilityElement.textContent || '0%').replace('%',''); currentVol = Math.max(0.1, parseFloat(volText) + (Math.random() - 0.5) * 0.1); updateValue(liveVolatilityElement, currentVol.toFixed(2) + '%'); }

                // Simulate Sentiment
                if (liveSentimentElement && Math.random() < 0.05) { const sentiments = ['Neutral', 'Slightly Bullish', 'Slightly Bearish', 'Bullish', 'Bearish']; liveSentimentElement.textContent = sentiments[Math.floor(Math.random() * sentiments.length)]; }

                // Simulate Storage
                if (euStorageElement && Math.random() < 0.01) { let storVal = parseFloat((euStorageElement.textContent || '0%').replace('%','')); storVal += (Math.random() - 0.45) * 0.1; currentStorage = Math.max(10, Math.min(99, storVal)).toFixed(1); updateValue(euStorageElement, currentStorage + '%'); } else { currentStorage = lastValues.storage; }


                // --- Update Charts ---
                const now = new Date().getTime();
                if (liveTickerChart && liveTickerChart.data) { // Check chart exists and has data property
                    liveTickerChart.data.labels.push(now);
                    liveTickerChart.data.datasets[0].data.push(currentTtf);
                    if (liveTickerChart.data.labels.length > TICKER_POINTS) {
                        liveTickerChart.data.labels.shift(); liveTickerChart.data.datasets[0].data.shift();
                    }
                    liveTickerChart.update('none');
                }

                // --- Generate AI Trend Analysis ---
                 updateAiTrends({
                     ttf: currentTtf,
                     ttfChange: ttfUpdate.change, // Use initialized object
                     volatility: currentVol,
                     storage: currentStorage,
                     carbon: currentCarbon,
                     carbonChange: carbonUpdate.change // Use initialized object
                 });


                // Store last values
                lastValues.ttf = currentTtf;
                 lastValues.brent = currentBrent;
                 lastValues.carbon = currentCarbon;
                 lastValues.volatility = currentVol;
                 lastValues.storage = currentStorage;


                // --- Update Timestamps ---
                const currentTime = getCurrentTimestamp();
                // Check elements exist before updating
                if (footerTimeElement) footerTimeElement.textContent = currentTime;
                if (aiSuggestTimeElement) aiSuggestTimeElement.textContent = currentTime;
                if (aiTrendTimeElement) aiTrendTimeElement.textContent = currentTime;

                // --- Flash Effect ---
                elementsToFlash.forEach(el => { if (el) flashElement(el); });
            }

             // Helper function to update value and add direction class
             function updateValue(element, newValue, direction = '') {
                 if (element) {
                     element.textContent = newValue;
                     element.classList.remove('up', 'down-neutral');
                     if (direction) { element.classList.add(direction); }
                 }
             }

             // Helper function for flash effect
             function flashElement(element) {
                 if (!element) return; // Guard against null elements
                 const isListItem = element.tagName === 'LI';
                 element.classList.add(isListItem ? 'updating' : 'value-updating');
                 setTimeout(() => element.classList.remove(isListItem ? 'updating' : 'value-updating'), 150);
             }

             // Helper function to generate and update AI Trend Analysis
             function updateAiTrends(data) {
                 const trends = [];
                 let ttfTrendDesc = "stable";
                 let ttfColor = "color: var(--neutral-down-color);";
                 if (data.ttfChange > 0.05) { ttfTrendDesc = "trending slightly higher"; ttfColor = "color: var(--up-color);"; }
                 else if (data.ttfChange < -0.05) { ttfTrendDesc = "trending slightly lower"; }

                 let carbonTrendDesc = "stable";
                 let carbonColor = "color: var(--neutral-down-color);";
                 if (data.carbonChange > 0.1) { carbonTrendDesc = "showing upward momentum"; carbonColor = "color: var(--up-color);"; }
                 else if (data.carbonChange < -0.1) { carbonTrendDesc = "showing downward pressure"; }

                 trends.push(`<strong>TTF Gas:</strong> Currently around <span class="trend-value" style="${ttfColor}">${data.ttf.toFixed(2)} â‚¬/MWh</span> and ${ttfTrendDesc}.`);
                 let volDesc = "moderate";
                 if (data.volatility > 2.5) volDesc = "elevated"; else if (data.volatility < 1.0) volDesc = "subdued";
                 trends.push(`<strong>Volatility:</strong> Market volatility is currently ${volDesc} at <span class="trend-value">${data.volatility.toFixed(2)}%</span>.`);
                 let storageDesc = "comfortable";
                 if (data.storage > 80) storageDesc = "very high"; else if (data.storage < 50) storageDesc = "relatively low";
                 trends.push(`<strong>Gas Storage:</strong> EU average storage remains ${storageDesc} at approx. <span class="trend-value">${data.storage}%</span> full.`);
                 trends.push(`<strong>Carbon (EUA):</strong> Price around <span class="trend-value" style="${carbonColor}">${data.carbon.toFixed(2)} â‚¬/t</span>, ${carbonTrendDesc}.`);
                 let sentiment = liveSentimentElement ? liveSentimentElement.textContent : "Neutral";
                 trends.push(`<strong>Overall Sentiment:</strong> Market appears <span class="trend-value">${sentiment}</span>, closely watching fundamental drivers.`);

                 trendElements.forEach((el, index) => { if (el && trends[index]) { el.innerHTML = trends[index]; } });
             }


            // --- Start Simulation Interval ---
            const simulationInterval = setInterval(simulateDataUpdate, 2500);

            // --- Initialize AI Trends & Timestamps on Load ---
            const initialTime = getCurrentTimestamp();
            if (footerTimeElement) footerTimeElement.textContent = initialTime;
            if (aiSuggestTimeElement) aiSuggestTimeElement.textContent = initialTime;
            if (aiTrendTimeElement) aiTrendTimeElement.textContent = initialTime;
            updateAiTrends(lastValues); // Initial population of AI trends

        }); // End DOMContentLoaded
    </script>

</body>
</html>
